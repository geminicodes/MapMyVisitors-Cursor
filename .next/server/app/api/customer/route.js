"use strict";(()=>{var e={};e.id=191,e.ids=[191],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},15129:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>c});var o=t(49303),a=t(88716),i=t(60670),n=t(87070),u=t(60167),p=t(85662);async function c(){try{let e=await (0,u.Zl)();if(!e)return n.NextResponse.json({message:"Unauthorized"},{status:401});let r=(0,p.m)(),{data:t,error:s}=await r.from("customers").select("*").eq("id",e.id).maybeSingle();if(s||!t)return console.error("Database error:",s),n.NextResponse.json({message:"Customer not found"},{status:404});return n.NextResponse.json({customer:{id:t.id,email:t.email,plan:t.plan,pageviews_used:t.pageviews_used,pageviews_limit:t.pageviews_limit,website_domains:t.website_domains,status:t.status}})}catch(e){return console.error("Customer fetch error:",e),n.NextResponse.json({message:"Internal server error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/customer/route",pathname:"/api/customer",filename:"route",bundlePath:"app/api/customer/route"},resolvedPagePath:"/workspaces/MapMyVisitors-Cursor/app/api/customer/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:x}=l,g="/api/customer/route";function v(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}},85662:(e,r,t)=>{t.d(r,{m:()=>o});var s=t(94738);function o(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,r=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!r)throw Error("Missing Supabase environment variables");return(0,s.eI)(e,r,{auth:{persistSession:!1,autoRefreshToken:!1}})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,37,70,482,167],()=>t(15129));module.exports=s})();