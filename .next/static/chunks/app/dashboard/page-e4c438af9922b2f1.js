(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4466:function(e,t,s){Promise.resolve().then(s.bind(s,5044))},5044:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),r=s(2265),i=s(7648),n=s(9376),c=s(1817),l=s(9322),o=s(9202),d=s(9205);let u=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var m=s(401);let x=(0,d.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function h(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){try{let t=await fetch("/api/customer");if(!t.ok){if(401===t.status){e.push("/login");return}b("generic"),h(!1);return}let a=await t.json();s(a.customer),h(!1)}catch(e){b("network"),h(!1)}}()},[e]);let w=async()=>{if(!t)return;let e='<!-- Step 1: Add container (optional) -->\n<div id="mapmyvisitors-widget"></div>\n\n<!-- Step 2: Add widget script -->\n<script src="https://mapmyvisitors.com/widget.js?id='.concat(t.id,'"></script>');try{await navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)}catch(e){console.error("Copy failed:",e),alert("Failed to copy. Please copy the code manually.")}},v=async()=>{j(!0);try{await fetch("/api/logout",{method:"POST"}),e.push("/login")}catch(e){console.error("Logout failed:",e),j(!1)}},N=()=>{h(!0),b(null),window.location.reload()};if(d)return(0,a.jsx)("div",{className:"min-h-screen bg-space-dark flex items-center justify-center px-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"w-12 h-12 text-accent-blue mx-auto mb-4 animate-spin","aria-label":"Loading"}),(0,a.jsx)("p",{className:"text-text-secondary text-lg",children:"Loading your dashboard..."})]})});if(p){let e={network:{icon:(0,a.jsx)(l.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),heading:"Connection Error",message:"Unable to load your dashboard. Please check your internet connection.",buttonText:"Retry",buttonAction:N},generic:{icon:(0,a.jsx)(l.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),heading:"Something Went Wrong",message:"Failed to load dashboard. Please try again.",buttonText:"Retry",buttonAction:N}},t=e[p]||e.generic;return(0,a.jsx)("div",{className:"min-h-screen bg-space-dark flex items-center justify-center px-6",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-space-card border border-space-border rounded-2xl p-8 text-center",children:[t.icon,(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:t.heading}),(0,a.jsx)("p",{className:"text-text-secondary mb-6",children:t.message}),(0,a.jsx)("button",{onClick:t.buttonAction,className:"px-6 py-3 bg-gradient-to-r from-accent-blue to-accent-purple text-white font-semibold rounded-lg hover:-translate-y-0.5 transition-all duration-200 shadow-lg hover:shadow-accent-blue/50",children:t.buttonText})]})})}if(!t)return null;let k=t.pageviews_used/t.pageviews_limit*100;return(0,a.jsx)("div",{className:"min-h-screen bg-space-dark",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-10 h-10 text-accent-blue mr-3","aria-hidden":"true"}),(0,a.jsx)(i.default,{href:"/",className:"text-2xl font-bold hover:text-accent-blue transition-colors",children:"MapMyVisitors"})]}),(0,a.jsxs)("button",{onClick:v,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-space-card border border-space-border rounded-lg hover:bg-space-dark transition-colors",children:[(0,a.jsx)(u,{className:"w-4 h-4"}),y?"Logging out...":"Logout"]})]}),(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold mb-4",children:"Your Globe is Ready!"}),(0,a.jsx)("p",{className:"text-lg font-medium text-text-secondary mb-2",children:"Copy the code below and paste it on your website"}),(0,a.jsxs)("p",{className:"text-sm text-text-muted",children:["Logged in as: ",t.email]})]}),(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-accent-blue/20 to-accent-purple/20 rounded-3xl blur-3xl","aria-hidden":"true"}),(0,a.jsxs)("div",{className:"relative p-8 rounded-3xl backdrop-blur-xl bg-white/5 border border-transparent shadow-2xl",style:{borderImage:"linear-gradient(to right, #3b82f6, #8b5cf6) 1",boxShadow:"0 0 60px rgba(59, 130, 246, 0.2)"},children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Your Widget Code"}),(0,a.jsx)("div",{className:"bg-space-dark p-6 rounded-xl mb-4 overflow-x-auto",children:(0,a.jsx)("pre",{className:"text-sm font-mono text-white whitespace-pre-wrap break-words",children:'<!-- Step 1: Add container (optional) -->\n<div id="mapmyvisitors-widget"></div>\n\n<!-- Step 2: Add widget script -->\n<script src="https://mapmyvisitors.com/widget.js?id='.concat(t.id,'"></script>')})}),(0,a.jsx)("button",{onClick:w,className:"w-full sm:w-auto h-12 px-6 bg-gradient-to-r from-accent-blue to-accent-purple text-white font-semibold rounded-xl hover:-translate-y-0.5 transition-all duration-200 shadow-lg hover:shadow-accent-blue/50 flex items-center justify-center gap-2 mb-4","aria-label":"Copy widget code to clipboard",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"w-5 h-5","aria-hidden":"true"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{className:"w-5 h-5","aria-hidden":"true"}),"Copy Code"]})}),(0,a.jsx)("p",{className:"text-sm text-text-secondary",children:"Paste this code anywhere in your HTML, just before the closing </body> tag"})]})]}),(0,a.jsx)("div",{className:"relative mb-12",children:(0,a.jsxs)("div",{className:"p-6 bg-space-card border border-space-border rounded-2xl",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Usage Statistics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-text-secondary",children:"Pageviews Used"}),(0,a.jsxs)("span",{className:"text-text-primary font-medium",children:[t.pageviews_used.toLocaleString()," / ",t.pageviews_limit.toLocaleString()]})]}),(0,a.jsx)("div",{className:"w-full bg-space-dark rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-accent-blue to-accent-purple transition-all duration-300",style:{width:"".concat(Math.min(k,100),"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-space-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-text-muted mb-1",children:"Plan"}),(0,a.jsx)("p",{className:"text-lg font-semibold capitalize",children:t.plan})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-text-muted mb-1",children:"Status"}),(0,a.jsx)("p",{className:"text-lg font-semibold capitalize",children:(0,a.jsx)("span",{className:"active"===t.status?"text-accent-green":"text-red-500",children:t.status})})]})]})]})]})}),(0,a.jsxs)("div",{className:"text-center mt-12 space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-text-muted",children:["Need help?"," ",(0,a.jsx)("a",{href:"mailto:hello@mapmyvisitors.com",className:"text-text-secondary hover:text-text-primary transition-colors",children:"hello@mapmyvisitors.com"})]}),(0,a.jsxs)("p",{className:"text-sm text-text-muted",children:["Want multiple websites?"," ",(0,a.jsx)("a",{href:"mailto:hello@mapmyvisitors.com",className:"text-text-secondary hover:text-text-primary transition-colors",children:"Contact us"})]})]})]})})}},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:l?24*Number(c)/Number(r):c,className:i("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:l,...o}=s;return(0,a.createElement)(c,{ref:n,iconNode:t,className:i("lucide-".concat(r(e)),l),...o})});return s.displayName="".concat(e),s}},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9322:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9202:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7648:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(2972),r=s.n(a)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);